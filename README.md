
# Genentech ADS Programming Assessment


This repository contains my solution to the **Genentech ADS Programming
Assessment**. Below is an explanation on what each folder contains and how to navigate it. 

## Video Walkthrough

A brief screen-share walkthrough of the repository structure, design decisions, and key learnings:

[Watch the walkthrough video](https://drive.google.com/file/d/1-RtNWEV8I5VFFFTk0Bg6xf6YPsrqhBU2/view?usp=sharing)


## Question 1 — SDTM DS Domain Creation

Contains all files related to **Question 1: SDTM DS domain creation**.

**Files**

- **`question_1_sdtm_01_create_ds_domain.R`**  
  Main R script used to generate the SDTM DS domain.

- **`sdtm_ct.csv`**  
  Study-specific controlled terminology used for mapping disposition codes.

- **`ds_SDTM.csv`**  
  Final SDTM DS dataset produced by the Question 1 script.

- **`q1_run_log.txt`**  
  Execution log included as evidence that the code runs successfully without errors.


## Question 2 — ADaM ADSL Dataset Creation

Contains all files related to **Question 2: ADaM ADSL dataset creation using the `{admiral}` package**.

**Files**

- **`question_2_adam_create_adsl.R`**  
  Main R script used to create the ADaM ADSL (subject-level) dataset from SDTM input domains  
  (`pharmaversesdtm::dm`, `vs`, `ex`, `ds`, `ae`).

- **`adam_adsl.csv`**  
  Final ADaM ADSL dataset generated by the Question 2 script.  
  All derived variables are located at the end of the dataset.

- **`q2_run_log.txt`**  
  Execution log included as evidence that the code runs successfully without errors.


## Question 3 — TLG: Adverse Events Reporting

Contains all files related to **Question 3: TLG – Adverse Events Reporting (Tables and Visualizations)**.

### 1) `question3_01_sumtable/`
Creation of the FDA-style AE summary table.

**Files**

- **`question_3_tlg_01_create_ae_summary_table.R`**  
  Main R script used to generate the FDA-style summary table of TEAEs.

- **`AE_summary_table.html`**  
  HTML output of the AE summary table.

- **`q3_01_table_run_log.txt`**  
  Execution log included as evidence that the table-generation code runs successfully without errors.

### 2) `question3_02_visuals/`
Creation of AE visualizations using `{ggplot2}`.

**Files**

- **`question_3_tlg_02_create_visualizations.R`**  
  Main R script used to generate AE visualizations, including:
  - AE severity distribution by treatment (stacked bar chart)
  - Top 10 most frequent AEs with 95% Clopper–Pearson confidence intervals (forest plot)

- **`ae_severity_by_treatment_barchart.png`**  
  Stacked bar chart showing AE severity distribution by treatment group.

- **`top_ten_ae_forest_plot.png`**  
  Forest plot showing the Top 10 most frequent adverse events with 95% confidence intervals.

- **`q3_02_visuals_run_log.txt`**  
  Execution log included as evidence that the visualization code runs successfully without errors.
  
## Question 4 — Generative AI Clinical Data Assistant

Contains all files related to **Question 4: Natural-Language Clinical Data Querying Using a Large Language Model (LLM)**.

**Files**

- **`prompt.py`**  
  Defines the system prompt used to instruct the LLM, including the AE schema and rules for mapping natural-language questions to SDTM AE variables.

- **`json_parser.py`**  
  Implements a custom output parser to extract and validate structured JSON output from the LLM.

- **`ae_query_chain.py`**  
  Builds the LangChain pipeline that connects the system prompt, LLM, and output parser to translate user questions into structured query instructions.

- **`clinical_agent.py`**  
  Defines the `ClinicalTrialDataAgent`, which interprets user questions, applies the resulting structured query to the AE dataset using pandas, and returns unique subject IDs and a summary of results.

- **`adae.csv`**  
  AE dataset used for testing and demonstration of the clinical data assistant.

- **`test_script.ipynb`**  
  Jupyter notebook demonstrating end-to-end execution of the clinical data assistant with example natural-language AE queries.

- **`requirements.txt`**  
  Python package dependencies required to run the Question 4 code.

